{"ast":null,"code":"var QRCode = require('./core/qrcode');\n\nvar CanvasRenderer = require('./renderer/canvas');\n\nvar SvgRenderer = require('./renderer/svg-render.js');\n\nfunction renderCanvas(renderFunc, canvas, text, opts, cb) {\n  var argsNum = arguments.length - 1;\n\n  if (argsNum < 2) {\n    throw new Error('Too few arguments provided');\n  }\n\n  if (argsNum === 2) {\n    cb = text;\n    text = canvas;\n    canvas = opts = undefined;\n  } else if (argsNum === 3) {\n    if (canvas.getContext && typeof cb === 'undefined') {\n      cb = opts;\n      opts = undefined;\n    } else {\n      cb = opts;\n      opts = text;\n      text = canvas;\n      canvas = undefined;\n    }\n  }\n\n  if (typeof cb !== 'function') {\n    throw new Error('Callback required as last argument');\n  }\n\n  try {\n    var data = QRCode.create(text, opts);\n    cb(null, renderFunc(data, canvas, opts));\n  } catch (e) {\n    cb(e);\n  }\n}\n\nexports.create = QRCode.create;\nexports.toCanvas = renderCanvas.bind(null, CanvasRenderer.render);\nexports.toDataURL = renderCanvas.bind(null, CanvasRenderer.renderToDataURL); // only svg for now.\n\nexports.toString = renderCanvas.bind(null, function (data, _, opts) {\n  return SvgRenderer.render(data, opts);\n});\n/**\n * Legacy API\n */\n\nexports.qrcodedraw = function () {\n  return {\n    draw: exports.toCanvas\n  };\n};","map":null,"metadata":{},"sourceType":"script"}