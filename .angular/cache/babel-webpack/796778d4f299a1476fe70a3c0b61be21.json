{"ast":null,"code":"var Utils = require('./utils');\n\nfunction getColorAttrib(color) {\n  return 'fill=\"rgb(' + [color.r, color.g, color.b].join(',') + ')\" ' + 'fill-opacity=\"' + (color.a / 255).toFixed(2) + '\"';\n}\n\nexports.render = function render(qrData, options) {\n  var opts = Utils.getOptions(options);\n  var size = qrData.modules.size;\n  var data = qrData.modules.data;\n  var qrcodesize = (size + opts.margin * 2) * opts.scale;\n  var xmlStr = '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n';\n  xmlStr += '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n';\n  xmlStr += '<svg version=\"1.1\" baseProfile=\"full\"';\n  xmlStr += ' width=\"' + qrcodesize + '\" height=\"' + qrcodesize + '\"';\n  xmlStr += ' viewBox=\"0 0 ' + qrcodesize + ' ' + qrcodesize + '\"';\n  xmlStr += ' xmlns=\"http://www.w3.org/2000/svg\"';\n  xmlStr += ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"';\n  xmlStr += ' xmlns:ev=\"http://www.w3.org/2001/xml-events\">\\n';\n  xmlStr += '<rect x=\"0\" y=\"0\" width=\"' + qrcodesize + '\" height=\"' + qrcodesize + '\" ' + getColorAttrib(opts.color.light) + ' />\\n';\n  xmlStr += '<defs><rect id=\"p\" width=\"' + opts.scale + '\" height=\"' + opts.scale + '\" /></defs>\\n';\n  xmlStr += '<g ' + getColorAttrib(opts.color.dark) + '>\\n';\n\n  for (var i = 0; i < size; i++) {\n    for (var j = 0; j < size; j++) {\n      if (!data[i * size + j]) continue;\n      var x = (opts.margin + j) * opts.scale;\n      var y = (opts.margin + i) * opts.scale;\n      xmlStr += '<use x=\"' + x + '\" y=\"' + y + '\" xlink:href=\"#p\" />\\n';\n    }\n  }\n\n  xmlStr += '</g>\\n';\n  xmlStr += '</svg>';\n  return xmlStr;\n};","map":null,"metadata":{},"sourceType":"script"}